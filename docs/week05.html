<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 05 | 期中實戰：走時曲線判讀與數位實驗室</title>
    <!-- 外部庫：AOS 動畫, FontAwesome, MathJax -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&family=JetBrains+Mono&display=swap');

        :root {
            --bg: #050505;
            --surface: #121212;
            --accent: #FFD700; /* 震測金 */
            --cyan: #00E5FF; /* 科技藍 */
            --soil: #3d2b1f; /* 地層棕 */
            --rock: #1a2a3a; /* 岩盤藍 */
        }

        * { box-sizing: border-box; scroll-behavior: smooth; }
        body {
            font-family: 'Inter', 'PingFang TC', sans-serif;
            background-color: var(--bg); color: #fff;
            margin: 0; line-height: 1.6; overflow-x: hidden;
        }

        /* 導覽列 */
        nav {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            background: rgba(5, 5, 5, 0.85); backdrop-filter: blur(15px);
            border-bottom: 1px solid #333; display: flex; justify-content: space-between; padding: 15px 40px;
        }
        nav a { color: var(--cyan); text-decoration: none; font-weight: bold; font-size: 0.8rem; letter-spacing: 1px; }

        /* Hero Section */
        .hero {
            height: 40vh; display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://github.com/rrrnnn0518-ux/finalterm_report/blob/main/source/middle_term1.png?raw=true');
            background-size: cover; background-position: center; border-bottom: 3px solid var(--accent);
        }
        .hero h1 { font-size: 3.5rem; color: var(--accent); margin: 0; font-weight: 900; text-shadow: 0 10px 20px rgba(0,0,0,0.8); }

        section { padding: 60px 20px; max-width: 1100px; margin: 0 auto; }
        .section-title { font-size: 2rem; color: var(--accent); margin-bottom: 40px; display: flex; align-items: center; gap: 15px; }
        .section-title::after { content: ""; flex-grow: 1; height: 1px; background: #333; }

        /* 期中解析卡片 */
        .exam-grid { display: grid; grid-template-columns: 1.2fr 1fr; gap: 40px; align-items: start; }
        .exam-image-container { position: relative; border-radius: 15px; border: 2px solid #333; overflow: hidden; background: #fff; }
        .exam-image-container img { width: 100%; display: block; filter: contrast(1.1); }
        
        .logic-card { background: var(--surface); padding: 30px; border-radius: 20px; border: 1px solid #444; }
        .step { margin-bottom: 25px; border-left: 3px solid var(--cyan); padding-left: 20px; }
        .step h4 { color: var(--cyan); margin: 0 0 10px 0; font-size: 1.1rem; }
        
        /* 模擬器區域 - 升級地層背景 */
        .sim-wrapper {
            height: 500px; border-radius: 30px; position: relative; overflow: hidden;
            border: 2px solid #333; cursor: crosshair;
            background: linear-gradient(to bottom, 
                #8d6e63 0%, #8d6e63 30%,   /* 表土層 */
                #5d4037 30%, #5d4037 60%,  /* 沉積層 */
                #263238 60%, #263238 100%  /* 岩盤層 */
            );
        }
        .layer-label { position: absolute; left: 20px; font-size: 0.7rem; font-weight: 900; color: rgba(255,255,255,0.4); pointer-events: none; text-transform: uppercase; }

        .wave {
            position: absolute; border: 2px solid var(--accent); border-radius: 50%;
            transform: translate(-50%, -50%); animation: seismic-ripple 2.5s cubic-bezier(0, 0.3, 0.7, 1) forwards;
            pointer-events: none;
        }
        @keyframes seismic-ripple {
            0% { width: 0; height: 0; opacity: 1; border-width: 4px; }
            100% { width: 1200px; height: 1200px; opacity: 0; border-width: 1px; }
        }

        .strike-point {
            position: absolute; width: 10px; height: 10px; background: #fff; border-radius: 50%;
            transform: translate(-50%, -50%); box-shadow: 0 0 20px #fff;
        }

        /* 數位工作流 */
        .tool-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .tool-card { background: #111; padding: 25px; border-radius: 15px; border-bottom: 4px solid var(--cyan); transition: 0.3s; }
        .tool-card:hover { transform: translateY(-5px); background: #161616; }

        footer { text-align: center; padding: 80px; opacity: 0.3; font-size: 0.8rem; }

        @media (max-width: 900px) { .exam-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<nav>
    <a href="index.html">← RETURN TO MAIN</a>
    <div style="display:flex; gap:25px;">
        <a href="#exam">MIDTERM ANALYSIS</a>
        <a href="#simulation">WAVE SIMULATOR</a>
        <a href="#codespace">CODESPACE</a>
    </div>
</nav>

<div class="hero">
    <h1 data-aos="fade-down">WEEK 05</h1>
    <p style="color:var(--cyan); letter-spacing: 3px; font-weight: bold;">走時曲線判讀與數位分層模擬</p>
</div>

<!-- 1. 期中考點深度解析 -->
<section id="exam">
    <h2 class="section-title"><i class="fas fa-file-invoice mr-3"></i>期中實戰：走時曲線判讀</h2>
    <div class="exam-grid">
        <div class="exam-image-container" data-aos="fade-right">
            <img src="https://github.com/rrrnnn0518-ux/finalterm_report/blob/main/source/middle_term1.png?raw=true" alt="Midterm Exam Chart">
            <div style="padding: 15px; background: #1a1a1a; color: var(--accent); font-size: 0.8rem; font-weight: bold;">
                案例分析：P 波走時曲線 (Time-Distance Curve)
            </div>
        </div>
        <div class="logic-card" data-aos="fade-left">
            <h3 class="text-xl font-bold mb-6 italic text-yellow-400">解題三步驟演繹</h3>
            
            <div class="step">
                <h4>STEP 01. 求取地殼波速 (V1)</h4>
                <p class="text-sm text-gray-400">觀察 0km 到 30km 的實線斜率。當 \(X=30km, T=5s\)，速度 \(V_1 = \Delta X / \Delta T = 30/5 = 6.0 \, km/s\)。</p>
            </div>

            <div class="step">
                <h4>STEP 02. 求取地函波速 (V2)</h4>
                <p class="text-sm text-gray-400">觀察轉折點之後的斜率。假設 100km 處走時約為 13.75s，則 \(V_2\) 斜率明顯較緩，代表波速增加。</p>
            </div>

            <div class="step">
                <h4>STEP 03. 計算地殼厚度 (h)</h4>
                <p class="text-sm text-gray-400">利用 \(X_{cr} = 30km\) (轉折距離)，帶入公式：</p>
                <div class="font-mono text-cyan-400 py-2">h = (Xcr/2) * √[(V2-V1)/(V2+V1)]</div>
            </div>
            
            <div class="bg-blue-900/20 p-4 rounded-lg border border-blue-500/30 mt-4">
                <p class="text-xs italic text-blue-300">"透過此模型，我們可以判斷這屬於典型的大陸板塊構造，其速度與厚度皆符合地殼特徵。"</p>
            </div>
        </div>
    </div>
</section>

<!-- 2. 地層波擴散模擬器 -->
<section id="simulation">
    <h2 class="section-title"><i class="fas fa-wave-square mr-3"></i>多地層震波模擬器</h2>
    <p class="mb-6 text-gray-400">點擊下方地層斷面，觀測地震波如何穿過表土層、沉積層與岩盤層。注意波前擴散與螢幕震動特效。</p>
    
    <div class="sim-wrapper" id="sim-box" data-aos="zoom-in">
        <span class="layer-label" style="top: 10%;">Surface / Soil Layer (V1)</span>
        <span class="layer-label" style="top: 45%;">Sediment Layer</span>
        <span class="layer-label" style="top: 75%;">Bedrock / Mantle (V2)</span>
        
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; text-align: center;">
            <p class="text-xs font-black opacity-20 uppercase tracking-[1em]">Tap to Strike</p>
        </div>
    </div>
</section>

<!-- 3. 數位工具箱 -->
<section id="codespace">
    <h2 class="section-title"><i class="fas fa-terminal mr-3"></i>數位化實作：ObsPy 與 Codespace</h2>
    <div class="tool-grid" data-aos="fade-up">
        <div class="tool-card">
            <i class="fab fa-github text-2xl mb-4 text-cyan-400"></i>
            <h4 class="font-bold">雲端開發環境</h4>
            <p class="text-sm text-gray-500">使用 GitHub Codespace 解決不同作業系統下 ObsPy 與 PyGMT 套件安裝的衝突問題。</p>
        </div>
        <div class="tool-card">
            <i class="fas fa-robot text-2xl mb-4 text-cyan-400"></i>
            <h4 class="font-bold">AI 輔助代碼</h4>
            <p class="text-sm text-gray-500">透過精確的 Prompt 要求 AI 抓取特定時間點 (2025/10/07) 之台站波形資料。</p>
        </div>
        <div class="tool-card">
            <i class="fas fa-chart-line text-2xl mb-4 text-cyan-400"></i>
            <h4 class="font-bold">自動化成像</h4>
            <p class="text-sm text-gray-500">利用 <code>st.plot(outfile="waveform.png")</code> 實現數據採集到報告輸出的全自動化工作流。</p>
        </div>
    </div>
</section>

<footer>
    <p>林靖融 | 2024 地球物理學習筆記 | 期末專案展示</p>
</footer>

<script>
    AOS.init({ duration: 1000, once: true });

    // 震波模擬器邏輯
    const simBox = document.getElementById('sim-box');
    simBox.addEventListener('click', function(e) {
        const rect = simBox.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        // 建立點擊點特效
        const dot = document.createElement('div');
        dot.className = 'strike-point';
        dot.style.left = x + 'px';
        dot.style.top = y + 'px';
        simBox.appendChild(dot);

        // 建立擴散波
        const wave = document.createElement('div');
        wave.className = 'wave';
        wave.style.left = x + 'px';
        wave.style.top = y + 'px';
        simBox.appendChild(wave);

        // 全螢幕震動特效 (Shake)
        document.body.animate([
            { transform: 'translate(1px, 1px) rotate(0deg)' },
            { transform: 'translate(-1px, -2px) rotate(-1deg)' },
            { transform: 'translate(-3px, 0px) rotate(1deg)' },
            { transform: 'translate(3px, 2px) rotate(0deg)' },
            { transform: 'translate(1px, -1px) rotate(1deg)' },
            { transform: 'translate(-1px, 2px) rotate(-1deg)' },
            { transform: 'translate(-3px, 1px) rotate(0deg)' },
            { transform: 'translate(3px, 1px) rotate(-1deg)' },
            { transform: 'translate(-1px, -1px) rotate(1deg)' },
            { transform: 'translate(1px, 2px) rotate(0deg)' },
            { transform: 'translate(1px, -2px) rotate(-1deg)' }
        ], {
            duration: 200,
            iterations: 1
        });

        // 清除元素
        setTimeout(() => { dot.remove(); wave.remove(); }, 2500);
    });
</script>

</body>
</html>
